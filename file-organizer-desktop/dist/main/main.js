(()=>{"use strict";var e={12:function(e,t,r){var n,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.FileService=void 0;const c=a(r(943)),s=a(r(928));t.FileService=class{async moveFile(e,t){try{if(!await this.fileExists(e))return console.error(`Source file does not exist: ${e}`),!1;const r=s.dirname(t);await c.mkdir(r,{recursive:!0});let n=t,i=1;for(;await this.fileExists(n);){const e=s.extname(t),r=s.basename(t,e),o=s.dirname(t);n=s.join(o,`${r}_${i}${e}`),i++}try{await c.rename(e,n)}catch(t){if("EXDEV"!==t.code)throw t;await c.copyFile(e,n),await c.unlink(e)}return!0}catch(e){return console.error("Error moving file:",e),!1}}async fileExists(e){try{return await c.access(e),!0}catch{return!1}}getFileExtension(e){return s.extname(e).toLowerCase().slice(1)}async getFileSize(e){try{return(await c.stat(e)).size}catch{return 0}}}},157:e=>{e.exports=require("electron")},185:function(e,t,r){var n,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.StorageService=void 0;const c=a(r(943)),s=a(r(928)),l=r(157);t.StorageService=class{constructor(){this.configPath=s.join(l.app.getPath("userData"),"storage-config.json")}async getConfig(){try{const e=await c.readFile(this.configPath,"utf-8");return JSON.parse(e)}catch{return null}}async saveConfig(e){try{return await c.writeFile(this.configPath,JSON.stringify(e,null,2)),!0}catch(e){return console.error("Error saving config:",e),!1}}getDefaultFolders(){return[{name:"Videos",icon:"🎥",extensions:["mp4","avi","mkv","mov","wmv","flv","webm"]},{name:"Images",icon:"🖼️",extensions:["jpg","jpeg","png","gif","bmp","svg","webp"]},{name:"PDFs",icon:"📄",extensions:["pdf"]},{name:"Excel",icon:"📊",extensions:["xlsx","xls","xlsm","csv"]},{name:"Word",icon:"📝",extensions:["docx","doc","rtf"]},{name:"PowerPoint",icon:"📈",extensions:["pptx","ppt"]},{name:"ZIP",icon:"🗜️",extensions:["zip","rar","7z","tar","gz"]},{name:"Audio",icon:"🎵",extensions:["mp3","wav","flac","aac","ogg","wma"]},{name:"Text",icon:"📋",extensions:["txt","md","json","xml","html","css","js"]},{name:"Others",icon:"📁",extensions:[]}]}}},558:function(e,t,r){var n,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.FolderService=void 0;const c=a(r(943)),s=a(r(928));t.FolderService=class{async createFolders(e,t){try{await c.mkdir(e,{recursive:!0});for(const r of t){const t=s.join(e,r);await c.mkdir(t,{recursive:!0})}return!0}catch(e){return console.error("Error creating folders:",e),!1}}async folderExists(e){try{return(await c.stat(e)).isDirectory()}catch{return!1}}}},915:function(e,t,r){var n,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0});const c=r(157),s=a(r(928)),l=r(12),u=r(185),f=r(558);(new class{constructor(){this.mainWindow=null,this.fileService=new l.FileService,this.storageService=new u.StorageService,this.folderService=new f.FolderService}async createWindow(){this.mainWindow=new c.BrowserWindow({width:1200,height:800,minWidth:800,minHeight:600,webPreferences:{nodeIntegration:!1,contextIsolation:!0,preload:s.join(__dirname,"preload.js")},icon:s.join(__dirname,"../../assets/icons/icon.png"),titleBarStyle:"default",show:!1}),await this.mainWindow.loadFile(s.join(__dirname,"../renderer/index.html")),this.mainWindow.once("ready-to-show",(()=>{this.mainWindow?.show()})),this.mainWindow.on("closed",(()=>{this.mainWindow=null}))}setupIpcHandlers(){c.ipcMain.handle("select-folder",(async()=>{if(!this.mainWindow)return null;const e=await c.dialog.showOpenDialog(this.mainWindow,{properties:["openDirectory"],title:"Select Storage Folder",buttonLabel:"Select Folder"});return e.canceled?null:e.filePaths[0]})),c.ipcMain.handle("create-folders",(async(e,t,r)=>{try{return await this.folderService.createFolders(t,r)}catch(e){return console.error("Error creating folders:",e),!1}})),c.ipcMain.handle("move-file",(async(e,t,r)=>{try{return await this.fileService.moveFile(t,r)}catch(e){return console.error("Error moving file:",e),!1}})),c.ipcMain.handle("file-exists",(async(e,t)=>{try{return await this.fileService.fileExists(t)}catch(e){return console.error("Error checking if file exists:",e),!1}})),c.ipcMain.handle("get-storage-config",(async()=>await this.storageService.getConfig())),c.ipcMain.handle("save-storage-config",(async(e,t)=>await this.storageService.saveConfig(t))),c.ipcMain.handle("show-toast",((e,t,r)=>{console.log(`Toast [${r}]: ${t}`)}))}async initialize(){await c.app.whenReady(),this.setupIpcHandlers(),await this.createWindow(),c.app.on("window-all-closed",(()=>{"darwin"!==process.platform&&c.app.quit()})),c.app.on("activate",(async()=>{0===c.BrowserWindow.getAllWindows().length&&await this.createWindow()}))}}).initialize().catch(console.error)},928:e=>{e.exports=require("path")},943:e=>{e.exports=require("fs/promises")}},t={};!function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}(915)})();